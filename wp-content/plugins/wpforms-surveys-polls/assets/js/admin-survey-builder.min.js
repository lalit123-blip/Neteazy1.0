!function(c){"use strict";var o,d={settings:{surveyFields:["text","textarea","select","radio","checkbox","rating","likert_scale","net_promoter_score"]},init:function(){o=this.settings,c(document).ready(d.ready),d.buildUIActions()},ready:function(){d.likertSortable()},buildUIActions:function(){c(document).on("click","#wpforms-panel-field-settings-disable_entries, #wpforms-panel-field-settings-survey_enable, #wpforms-panel-field-settings-poll_enable",d.alertEnableEntries),c(document).on("change","#wpforms-panel-field-settings-survey_enable",function(){c(this).is(":checked")?c(".wpforms-field-option-row-survey").addClass("wpforms-hidden"):c(".wpforms-field-option-row-survey").removeClass("wpforms-hidden")}),c(document).on("wpformsFieldAdd",function(e,i,t){-1<c.inArray(t,o.surveyFields)&&c("#wpforms-panel-field-settings-survey_enable").is(":checked")&&c("#wpforms-field-option-row-"+i+"-survey").addClass("wpforms-hidden")}),c(document).on("wpformsFieldAdd",function(e,i,t){"likert_scale"===t&&d.likertSortable("#wpforms-field-option-"+i+" .choices-list")}),c(document).on("click",".wpforms-field-option-likert_scale .choices-list .add",function(e){d.likertChoiceAdd(e,c(this))}),c(document).on("click",".wpforms-field-option-likert_scale .choices-list .remove",function(e){d.likertChoiceDelete(e,c(this))}),c(document).on("focusout",".wpforms-field-option-likert_scale .choices-list input",function(){var e=c(this).closest(".choices-list").data("field-id");d.likertChoiceUpdate(e)}),c(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-single_row input",function(){c(this).closest(".wpforms-field-option-group-inner").find(".wpforms-field-option-row-rows .choices-list").toggleClass("wpforms-hidden"),d.likertChoiceUpdate(c(this).parent().data("field-id"))}),c(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-multiple_responses input",function(){d.likertChoiceUpdate(c(this).parent().data("field-id"))}),c(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-style select",function(){var e=c(this),i=e.val(),t=e.parent().data("field-id");c("#wpforms-field-"+t).find("table").removeClass("classic modern").addClass(i)}),c(document).on("change",".wpforms-field-option-net_promoter_score .wpforms-field-option-row-style select",function(){var e=c(this),i=e.val(),t=e.parent().data("field-id");c("#wpforms-field-"+t).find("table").removeClass("classic modern").addClass(i)})},alertEnableEntries:function(){var e=c(this),i=c("#wpforms-panel-field-settings-disable_entries"),t=c("#wpforms-panel-field-settings-survey_enable"),o=c("#wpforms-panel-field-settings-poll_enable"),s="";if(e.is(":checked")){if(e.is(i)){if(!t.is(":checked")&&!o.is(":checked"))return;s=wpforms_surveys_polls.alert_disable_entries}else{if(!i.is(":checked"))return;s=wpforms_surveys_polls.alert_enable_entries,e.prop("checked",!1)}c.alert({title:wpforms_builder.heads_up,content:s,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})}},likertSortable:function(e){c(e=e||".wpforms-field-option-likert_scale .choices-list").sortable({items:"li",axis:"y",delay:100,opacity:.6,handle:".move",stop:function(e,i){var t=i.item.parent().data("field-id");d.likertChoiceUpdate(t)},update:function(){}})},likertChoiceAdd:function(e,i){e.preventDefault();var t=c(i),o=t.parent(),s=t.closest(".choices-list"),n=s.data("field-id"),l=s.attr("data-next-id"),r=s.data("choice-type"),a=o.clone().insertAfter(o);a.attr("data-key",l),a.find("input").val("").attr("name","fields["+n+"]["+r+"]["+l+"]"),l++,s.attr("data-next-id",l),d.likertChoiceUpdate(n)},likertChoiceDelete:function(e,i){e.preventDefault();var t=c(i),o=t.closest(".choices-list");1===o.find("li").length?c.alert({title:!1,content:wpforms_builder.error_choice,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}}):(t.parent().remove(),d.likertChoiceUpdate(o.data("field-id")))},likertChoiceUpdate:function(e){var o={rows:{},columns:{},colCount:0,singleRow:c("#wpforms-field-option-"+e+"-single_row").is(":checked "),singleClass:c("#wpforms-field-option-"+e+"-single_row").is(":checked ")?"single-row":"",inputType:c("#wpforms-field-option-"+e+"-multiple_responses").is(":checked ")?"checkbox":"radio",style:c("#wpforms-field-option-"+e+"-style").val(),width:0};c("#wpforms-field-option-row-"+e+"-columns .choices-list li").each(function(){var e=c(this),i=e.data("key"),t=e.find("input").val();o.columns["c"+i]={key:i,value:t},o.colCount++}),c("#wpforms-field-option-row-"+e+"-rows .choices-list li").each(function(){var e=c(this),i=e.data("key"),t=e.find("input").val();o.rows["r"+i]={key:i,value:t}}),o.width=o.singleRow?100/o.colCount:80/o.colCount;var i=wp.template("wpforms-likert-scale-preview");c("#wpforms-field-"+e).find("table").replaceWith(i(o))}};d.init()}(jQuery);